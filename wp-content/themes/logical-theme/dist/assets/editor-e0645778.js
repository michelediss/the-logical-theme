const{registerBlockType:d}=wp.blocks,{InspectorControls:w,useBlockProps:h,MediaUpload:E,MediaUploadCheck:O,InnerBlocks:m}=wp.blockEditor,{PanelBody:v,TextControl:k,TextareaControl:L,Button:M,SelectControl:p}=wp.components,{createElement:t,useEffect:y}=wp.element,{__:l}=wp.i18n,{select:P}=wp.data,Y="4.0",I="logical-theme/layout",b="logical-theme/row",u="logical-theme/column",S="logical-theme/pretitle",B="logical-theme/title",N="logical-theme/text",_="logical-theme/image",x="logical-theme/button",V=[S,B,N,_,x];function C(i){return`${i}_${Date.now().toString(36)}_${Math.random().toString(36).slice(2,8)}`}function n(i){return typeof i=="string"?i:""}function s(i){const e=Number.parseInt(i,10);return Number.isNaN(e)?12:Math.max(1,Math.min(12,e))}function K(){const i=P("core/block-editor"),e=i!=null&&i.getSettings?i.getSettings():null,r=(Array.isArray(e==null?void 0:e.colors)?e.colors:[]).map(a=>{if(!a||typeof a!="object")return null;const c=n(a.slug);if(!c)return null;const g=n(a.name)||c;return{value:c,label:g}}).filter(Boolean);return[{value:"",label:l("Default","wp-logical-theme")},...r]}function R(){d(S,{apiVersion:2,title:l("Pretitle","wp-logical-theme"),icon:"editor-kitchensink",category:"widgets",ancestor:[u],attributes:{itemId:{type:"string",default:""},text:{type:"string",default:""}},supports:{html:!1,reusable:!1,inserter:!0},edit:function({attributes:e,setAttributes:o}){y(()=>{e.itemId||o({itemId:C("item")})},[e.itemId,o]);const r=h({className:"logical-layout-mini-pretitle"});return t("div",r,t(w,null,t(v,{title:l("Pretitle Settings","wp-logical-theme"),initialOpen:!0},t(k,{label:l("Pretitle","wp-logical-theme"),value:n(e.text),onChange:a=>o({text:a})}))),t("span",{className:"text-sm font-semibold uppercase logical-color-eyebrow"},n(e.text)||l("Pretitle","wp-logical-theme")))},save:function(){return null}}),d(B,{apiVersion:2,title:l("Title","wp-logical-theme"),icon:"heading",category:"widgets",ancestor:[u],attributes:{itemId:{type:"string",default:""},text:{type:"string",default:""},level:{type:"string",default:"h2"}},supports:{html:!1,reusable:!1,inserter:!0},edit:function({attributes:e,setAttributes:o}){y(()=>{e.itemId||o({itemId:C("item")})},[e.itemId,o]);const r=["h1","h2","h3","h4","h5","h6"].includes(n(e.level))?n(e.level):"h2",a=h({className:"logical-layout-mini-title"});return t("div",a,t(w,null,t(v,{title:l("Title Settings","wp-logical-theme"),initialOpen:!0},t(p,{label:l("Level","wp-logical-theme"),value:r,options:["h1","h2","h3","h4","h5","h6"].map(c=>({value:c,label:c.toUpperCase()})),onChange:c=>o({level:c})}),t(k,{label:l("Title","wp-logical-theme"),value:n(e.text),onChange:c=>o({text:c})}))),t(r,{className:"text-3xl font-bold logical-color-heading"},n(e.text)||l("Title","wp-logical-theme")))},save:function(){return null}}),d(N,{apiVersion:2,title:l("Text","wp-logical-theme"),icon:"text",category:"widgets",ancestor:[u],attributes:{itemId:{type:"string",default:""},text:{type:"string",default:""}},supports:{html:!1,reusable:!1,inserter:!0},edit:function({attributes:e,setAttributes:o}){y(()=>{e.itemId||o({itemId:C("item")})},[e.itemId,o]);const r=h({className:"logical-layout-mini-text"});return t("div",r,t(w,null,t(v,{title:l("Text Settings","wp-logical-theme"),initialOpen:!0},t(L,{label:l("Text","wp-logical-theme"),value:n(e.text),onChange:a=>o({text:a})}))),t("div",{className:"logical-layout-text logical-color-body"},n(e.text)||l("Text","wp-logical-theme")))},save:function(){return null}}),d(_,{apiVersion:2,title:l("Image","wp-logical-theme"),icon:"format-image",category:"widgets",ancestor:[u],attributes:{itemId:{type:"string",default:""},id:{type:"number",default:0},src:{type:"string",default:""},alt:{type:"string",default:""}},supports:{html:!1,reusable:!1,inserter:!0},edit:function({attributes:e,setAttributes:o}){y(()=>{e.itemId||o({itemId:C("item")})},[e.itemId,o]);const r=h({className:"logical-layout-mini-image"});return t("div",r,t(w,null,t(v,{title:l("Image Settings","wp-logical-theme"),initialOpen:!0},t(O,null,t(E,{onSelect:a=>o({id:(a==null?void 0:a.id)||0,src:(a==null?void 0:a.url)||"",alt:(a==null?void 0:a.alt)||(a==null?void 0:a.title)||""}),allowedTypes:["image"],value:e.id||0,render:({open:a})=>t(M,{variant:"secondary",onClick:a},e.src?l("Change image","wp-logical-theme"):l("Select image","wp-logical-theme"))})),e.src?t(k,{label:l("Image alt","wp-logical-theme"),value:n(e.alt),onChange:a=>o({alt:a})}):null)),e.src?t("img",{src:e.src,alt:n(e.alt),className:"h-auto w-full rounded-lg object-cover"}):t("div",{className:"logical-layout-text logical-color-muted"},l("No image selected","wp-logical-theme")))},save:function(){return null}}),d(x,{apiVersion:2,title:l("Button","wp-logical-theme"),icon:"button",category:"widgets",ancestor:[u],attributes:{itemId:{type:"string",default:""},label:{type:"string",default:""},url:{type:"string",default:""},variant:{type:"string",default:"primary"},target:{type:"string",default:"_self"}},supports:{html:!1,reusable:!1,inserter:!0},edit:function({attributes:e,setAttributes:o}){y(()=>{e.itemId||o({itemId:C("item")})},[e.itemId,o]);const r=["primary","secondary","outline","link"].includes(n(e.variant))?n(e.variant):"primary",a=n(e.target)==="_blank"?"_blank":"_self",c=h({className:"logical-layout-mini-button"});return t("div",c,t(w,null,t(v,{title:l("Button Settings","wp-logical-theme"),initialOpen:!0},t(k,{label:l("Button label","wp-logical-theme"),value:n(e.label),onChange:g=>o({label:g})}),t(k,{label:l("Button URL","wp-logical-theme"),value:n(e.url),onChange:g=>o({url:g})}),t(p,{label:l("Variant","wp-logical-theme"),value:r,options:[{value:"primary",label:l("Primary","wp-logical-theme")},{value:"secondary",label:l("Secondary","wp-logical-theme")},{value:"outline",label:l("Outline","wp-logical-theme")},{value:"link",label:l("Link","wp-logical-theme")}],onChange:g=>o({variant:g})}),t(p,{label:l("Target","wp-logical-theme"),value:a,options:[{value:"_self",label:l("Same tab","wp-logical-theme")},{value:"_blank",label:l("New tab","wp-logical-theme")}],onChange:g=>o({target:g==="_blank"?"_blank":"_self"})}))),t("span",{className:"logical-layout-button inline-flex items-center justify-center rounded-lg border px-5 py-3 text-sm font-semibold"},n(e.label)||l("Button","wp-logical-theme")))},save:function(){return null}})}d(u,{apiVersion:2,title:l("Column","wp-logical-theme"),icon:"columns",category:"widgets",parent:[b],attributes:{columnId:{type:"string",default:""},desktop:{type:"number",default:12},tablet:{type:"number",default:12},mobile:{type:"number",default:12},alignY:{type:"string",default:"stretch"}},supports:{html:!1,reusable:!1},edit:function({attributes:e,setAttributes:o}){y(()=>{e.columnId||o({columnId:C("col")})},[e.columnId,o]);const r=h({className:"logical-layout-col",style:{"--logical-col-mobile":s(e.mobile),"--logical-col-tablet":s(e.tablet),"--logical-col-desktop":s(e.desktop),"--logical-col-align":["start","center","end","stretch"].includes(n(e.alignY))?n(e.alignY):"stretch"}});return t("div",r,t(w,null,t(v,{title:l("Column Settings","wp-logical-theme"),initialOpen:!0},t(p,{label:l("Desktop span","wp-logical-theme"),value:String(s(e.desktop)),options:Array.from({length:12}).map((a,c)=>({value:String(c+1),label:String(c+1)})),onChange:a=>o({desktop:s(a)})}),t(p,{label:l("Tablet span","wp-logical-theme"),value:String(s(e.tablet)),options:Array.from({length:12}).map((a,c)=>({value:String(c+1),label:String(c+1)})),onChange:a=>o({tablet:s(a)})}),t(p,{label:l("Mobile span","wp-logical-theme"),value:String(s(e.mobile)),options:Array.from({length:12}).map((a,c)=>({value:String(c+1),label:String(c+1)})),onChange:a=>o({mobile:s(a)})}),t(p,{label:l("Vertical align","wp-logical-theme"),value:["start","center","end","stretch"].includes(n(e.alignY))?n(e.alignY):"stretch",options:[{value:"stretch",label:l("Stretch","wp-logical-theme")},{value:"start",label:l("Top","wp-logical-theme")},{value:"center",label:l("Center","wp-logical-theme")},{value:"end",label:l("Bottom","wp-logical-theme")}],onChange:a=>o({alignY:a})}))),t(m,{allowedBlocks:["core/embed",...V],orientation:"vertical",renderAppender:m.ButtonBlockAppender}))},save:function(){return t(m.Content)}});R();d(b,{apiVersion:2,title:l("Row","wp-logical-theme"),icon:"menu-alt3",category:"widgets",parent:[I],attributes:{rowId:{type:"string",default:""},container:{type:"string",default:"default"},gap:{type:"string",default:"md"},alignY:{type:"string",default:"stretch"},backgroundColor:{type:"string",default:""}},supports:{html:!1,reusable:!1},edit:function({attributes:e,setAttributes:o}){y(()=>{e.rowId||o({rowId:C("row")})},[e.rowId,o]);const r={none:"0",sm:"0.75rem",md:"1.25rem",lg:"2rem"},a=["default","wide","full"].includes(n(e.container))?n(e.container):"default";let c="container";a==="wide"?c="container logical-layout-container-wide":a==="full"&&(c="container logical-layout-container-full");const g=h({className:"logical-layout-row",style:{"--logical-row-gap":r[n(e.gap)]||r.md,"--logical-row-align":["start","center","end","stretch"].includes(n(e.alignY))?n(e.alignY):"stretch"}}),T=["logical-layout-section","logical-theme-color-surface",n(e.backgroundColor)?"has-surface-color":"",n(e.backgroundColor)?`has-${n(e.backgroundColor)}-background-color`:""].filter(Boolean).join(" ");return t("section",{className:T,"data-surface-color":n(e.backgroundColor)},t("div",{className:c},t("div",g,t(w,null,t(v,{title:l("Row Settings","wp-logical-theme"),initialOpen:!0},t(p,{label:l("Container","wp-logical-theme"),value:a,options:[{value:"default",label:l("Default","wp-logical-theme")},{value:"wide",label:l("Wide","wp-logical-theme")},{value:"full",label:l("Full","wp-logical-theme")}],onChange:f=>o({container:f})}),t(p,{label:l("Gap","wp-logical-theme"),value:["none","sm","md","lg"].includes(n(e.gap))?n(e.gap):"md",options:[{value:"none",label:l("None","wp-logical-theme")},{value:"sm",label:l("Small","wp-logical-theme")},{value:"md",label:l("Medium","wp-logical-theme")},{value:"lg",label:l("Large","wp-logical-theme")}],onChange:f=>o({gap:f})}),t(p,{label:l("Vertical align","wp-logical-theme"),value:["start","center","end","stretch"].includes(n(e.alignY))?n(e.alignY):"stretch",options:[{value:"stretch",label:l("Stretch","wp-logical-theme")},{value:"start",label:l("Top","wp-logical-theme")},{value:"center",label:l("Center","wp-logical-theme")},{value:"end",label:l("Bottom","wp-logical-theme")}],onChange:f=>o({alignY:f})}),t(p,{label:l("Background","wp-logical-theme"),value:n(e.backgroundColor),options:K(),onChange:f=>o({backgroundColor:f})}))),t(m,{allowedBlocks:[u],orientation:"horizontal",template:[[u]],renderAppender:m.ButtonBlockAppender}))))},save:function(){return t(m.Content)}});d(I,{apiVersion:2,title:l("Layout","wp-logical-theme"),icon:"screenoptions",category:"widgets",attributes:{layoutVersion:{type:"string",default:Y}},supports:{html:!1,color:{text:!0,background:!0,link:!0},typography:{fontSize:!0,lineHeight:!0,fontFamily:!0},spacing:{margin:!0,padding:!0}},edit:function(){const e=h({className:"logical-layout-block"});return t("div",e,t(m,{allowedBlocks:[b],template:[[b,{},[[u]]]],renderAppender:m.ButtonBlockAppender}))},save:function(){return t(m.Content)}});
